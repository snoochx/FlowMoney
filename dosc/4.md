# Описание прецедентов

## Управление счетами
**Актор:** Пользователь, Система  

**Основной поток:**
1. Пользователь открывает список счетов (`AccountsActivity`).  
2. Система загружает все существующие счета из базы данных и отображает их в списке.  

**Возможные действия пользователя:**
- **Создать новый счет**  
  - Открыть `CreateAccountActivity`  
  - Ввести название  
  - Подтвердить  
  - **Система:** проверяет уникальность названия, создаёт запись в базе и обновляет список  
- **Открыть существующий счет**  
  - Открыть `AccountInfoActivity`  
  - Посмотреть баланс и операции счета  
- **Перевести деньги между счетами**  
  - Открыть `TransferActivity`  
  - Выбрать источник и получателя  
  - Ввести сумму  
  - Подтвердить  
  - **Система:** проверяет баланс и обновляет оба счета  
- **Закрыть счёт**  
  - Сумма переносится на основной счёт  
  - Запись удаляется из базы  

**Результат:**  
Счета созданы, изменены или удалены, баланс обновлён, пользователь видит актуальную информацию.

---

## Добавление финансовой операции
**Актор:** Пользователь  

**Основной поток:**
1. Пользователь открывает `AddOperationActivity`.  
2. Выбирает тип операции: доход или расход (кнопки toggle).  
3. Вводит сумму, комментарий, категорию (через диалог выбора категории).  
4. Подтверждает сохранение.  

**Система:** создаёт `OperationEntity` и добавляет его в базу через ViewModel.  
- Если операция расход — основной счёт уменьшается  
- Если доход — увеличивается  

**Результат:**  
Операция сохранена, баланс основного счёта обновлён, операция отображается в аналитике.

---

## Просмотр аналитики
**Актор:** Пользователь  

**Основной поток:**
1. Пользователь открывает `AnalyticsActivity`.  
2. Система загружает все операции из базы и группирует их по дате (сегодня, вчера, день недели).  
3. Пользователь может переключать отображение: доходы или расходы.  
4. Система формирует список с заголовками и операциями, применяет цвета и иконки по категории.  

**Результат:**  
Пользователь видит операции с группировкой по дате и визуальным выделением категорий и суммы.

---

## Перевод между счетами
**Актор:** Пользователь  

**Основной поток:**
1. Пользователь открывает `TransferActivity`.  
2. Выбирает счёт-отправитель и счёт-получатель (можно поменять местами).  
3. Вводит сумму перевода.  
4. Подтверждает.  

**Система:** проверяет, достаточно ли средств на счёте-отправителе.  
- Балансы обоих счетов обновляются  
- Операция сохраняется при необходимости  

**Результат:**  
Сумма переведена между счетами, пользователь видит обновлённые балансы.

---

## Управление категориями
**Актор:** Пользователь  

**Основной поток:**
1. При добавлении операции пользователь выбирает категорию через диалог (`AddOperationActivity`).  
2. Система отображает список категорий с иконками и цветами.  
3. Пользователь выбирает категорию, система присваивает её операции.  

**Результат:**  
Операция помечена категорией, аналитика и отображение операций корректно показывают информацию.
